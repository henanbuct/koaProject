(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{329:function(e,t,n){"use strict";n.r(t);n(70);var r=n(1),a=n.n(r),o=n(10),i=n.n(o),s=n(340),u=n(343),c=n(337),l=n(335),f=n(342),m=n(338),p=n(13),d=n(339),h=n(331),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function b(e){if(e){var t=e.url||"",n=e.type||"GET",r=e.data||{},a=void 0,o=void 0,i={credentials:"include"};if("GET"===n){var s=[];for(var u in r){var c="";c="object"===v(r[u])?u+"="+JSON.stringify(r[u]):u+"="+r[u],s.push(c)}t=t.indexOf("?")>=0?t+"&"+s.join("&"):t+"?"+s.join("&"),i=y({},i,{headers:new Headers})}else i={credentials:"include",method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},i=y({},i,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if("function"!=typeof e.success||"function"!=typeof e.error)return new Promise(function(e,n){window.fetch(t,i).then(function(e){return e.json()}).then(function(t){e(t)}).catch(function(e){n(e)})}).catch(function(e){console.log(e)});a=e.success,o=e.error,window.fetch(t,i).then(function(e){return e.json()}).then(function(e){a(e)}).catch(function(e){o(e)})}}var w={get:function(e){if("object"===(void 0===e?"undefined":v(e)))return e.type="GET",b(e)},post:function(e){if("object"===(void 0===e?"undefined":v(e)))return e.type="POST",b(e)},form:function(e){if("object"===(void 0===e?"undefined":v(e))){var t=e.url||"",n=e.data||{},r=document.createElement("form");for(var a in r.method="POST",r.action=t,n){var o=document.createElement("input");o.type="hidden",o.name=a;var i=n[a];"object"===(void 0===i?"undefined":v(i))&&(i=window.JSON.stringify(i)),o.value=i,r.appendChild(o)}document.body.appendChild(r),r.submit()}}};var g=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var i=t[a](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post({url:"/api/user/signIn.json",data:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),E=function(e){e.source="form",w.form({url:"/api/user/signIn.json",data:e})};var x=l.a.Item,P=l.a.create()(a.a.createClass({displayName:"SignInForm",handleSubmit:function(e){var t=this;return function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var i=t[a](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,t.getFormValues();case 3:if(!(r=n.sent)){n.next=11;break}return n.next=7,g(r);case 7:(a=n.sent)&&!0===a.success?(f.a.success("登录成功！"),E(r)):a&&a.message&&f.a.error(a.message),n.next=12;break;case 11:f.a.error("系统繁忙，稍后再试！");case 12:case"end":return n.stop()}},n,t)}))()},getFormValues:function(){var e=this;return new Promise(function(t,n){e.props.form.validateFields(function(e,r){e?n(!1):t(r)})})},render:function(){var e=this.props.form.getFieldDecorator;return a.a.createElement("div",{style:{width:"280px",margin:"0 auto"}},a.a.createElement(l.a,{onSubmit:this.handleSubmit,className:"login-form"},a.a.createElement(x,null,e("userName",{rules:[{required:!0,message:"请您输入账号名称！"}]})(a.a.createElement(m.a,{addonBefore:a.a.createElement(p.a,{type:"user"}),placeholder:"请您输入用户名称！"}))),a.a.createElement(x,null,e("password",{rules:[{required:!0,message:"请您输入账号密码！"}]})(a.a.createElement(m.a,{addonBefore:a.a.createElement(p.a,{type:"lock"}),type:"password",placeholder:"请您输入账号密码"}))),a.a.createElement(x,null,e("remember",{valuePropName:"checked",initialValue:!0})(a.a.createElement(d.a,null,"记住登录")),a.a.createElement("a",{className:"login-form-forgot"},"忘记密码"),a.a.createElement("br",null),a.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"确定"))))}})),j=n(336),O=n(330),k=n(132),S=n.n(k);var _=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var i=t[a](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(n=F(t)).success){e.next=3;break}return e.abrupt("return",n);case 3:return r=w.post({url:"/api/user/signUp.json",data:t}),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t={success:!1,message:""};return!1===/[a-z0-9\_\-]{6,16}/.test(e.userName)?(t.message="用户名格式为6-16位的小写字母，包括-、_",t):S.a.isEmail(e.email)?/[\w+]{6,16}/.test(e.password)?e.password!==e.confirmPassword?(t.message="两次密码不一致",t):(t.success=!0,t):(t.message="密码长度应该为6-16",t):(t.message="请输入正确的邮箱地址",t)},C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var N=l.a.Item,T=(j.a.Option,l.a.create()(a.a.createClass({displayName:"SignUpForm",getInitialState:function(){return{passwordDirty:!1}},handleSubmit:function(e){var t=this;return function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var i=t[a](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,t.getFormValues();case 3:if(!(r=n.sent)){n.next=11;break}return n.next=7,_(r);case 7:(a=n.sent)&&!0===a.success?(f.a.success("注册成功！"),window.location.href="/admin?signUpSuccess=true"):a&&a.message&&f.a.error(a.message),n.next=12;break;case 11:f.a.error("系统繁忙，稍后再试！");case 12:case"end":return n.stop()}},n,t)}))()},getFormValues:function(){var e=this;return new Promise(function(t,n){e.props.form.validateFieldsAndScroll(function(e,r){e?n(!1):t(r)})})},handlePasswordBlur:function(e){var t=e.target.value;this.setState({passwordDirty:this.state.passwordDirty||!!t})},checkPassword:function(e,t,n){var r=this.props.form;t&&t!==r.getFieldValue("password")?n("两次密码输入不一致，请你检查！"):n()},checkConfirm:function(e,t,n){var r=this.props.form;t&&this.state.passwordDirty&&r.validateFields(["confirm"],{force:!0}),n()},render:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:6},wrapperCol:{span:14}},n={wrapperCol:{span:14,offset:6}};return a.a.createElement(l.a,{onSubmit:this.handleSubmit},a.a.createElement(N,C({},t,{label:a.a.createElement("span",null,"用户名",a.a.createElement(O.a,{title:"必须是小写6-16位字母，或数字，或下划线，不能以数字开头"},a.a.createElement(p.a,{type:"question-circle-o"}))),hasFeedback:!0}),e("userName",{rules:[{required:!0,message:"请输入您的用户名"}]})(a.a.createElement(m.a,null))),a.a.createElement(N,C({},t,{label:"E-mail地址",hasFeedback:!0}),e("email",{rules:[{type:"email",message:"请您输入正确格式的邮箱地址"},{required:!0,message:"请您输入邮箱地址！"}]})(a.a.createElement(m.a,null))),a.a.createElement(N,C({},t,{label:"密码",hasFeedback:!0}),e("password",{rules:[{required:!0,message:"请您输入您的账号密码！"},{validator:this.checkConfirm}]})(a.a.createElement(m.a,{type:"password",onBlur:this.handlePasswordBlur}))),a.a.createElement(N,C({},t,{label:"确认密码",hasFeedback:!0}),e("confirmPassword",{rules:[{required:!0,message:"请您再次输入账号密码进行确认！"},{validator:this.checkPassword}]})(a.a.createElement(m.a,{type:"password"}))),a.a.createElement(N,C({},n,{style:{marginBottom:8}}),e("agreement",{valuePropName:"checked"})(a.a.createElement(d.a,null,"我已阅读 ",a.a.createElement("a",null,"《xxxx协议》")))),a.a.createElement(N,n,a.a.createElement(h.a,{type:"primary",htmlType:"submit",size:"large"},"确定")))}}))),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var I=c.a.TabPane,D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),R(t,[{key:"render",value:function(){return a.a.createElement("div",{style:{width:"640px",margin:"0 auto"}},a.a.createElement(c.a,{defaultActiveKey:"1",size:"small"},a.a.createElement(I,{tab:"登录",key:"1"},a.a.createElement(P,null)),a.a.createElement(I,{tab:"注册",key:"2"},a.a.createElement(T,null))))}}]),t}(),q=n(68),B=n(44),J=(n(65),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());s.a.Header;var V=s.a.Content,U=(s.a.Footer,function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),J(t,[{key:"render",value:function(){return a.a.createElement(s.a,{className:"layout"},a.a.createElement(q.a,null),a.a.createElement(V,{style:{padding:"0 50px"}},a.a.createElement(u.a,{style:{margin:"12px 0"}},a.a.createElement(u.a.Item,null,"Admin"),a.a.createElement(u.a.Item,null,"User")),a.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280}},a.a.createElement(D,null))),a.a.createElement(B.a,null))}}]),t}());i.a.render(a.a.createElement(U,null),document.getElementById("app"))}},[[329,6,0]]]);